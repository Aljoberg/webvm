FROM --platform=i386 i386/debian:buster
ARG DEBIAN_FRONTEND=noninteractive

RUN apt-get update && apt-get -y upgrade && \
	apt-get install -y apt-utils beef bsdgames bsdmainutils ca-certificates clang \
	cowsay cron curl dmidecode dmsetup g++ gcc gdbm-l10n git  \
	ifupdown init logrotate lua50 luajit lynx make \
	nano netbase nodejs openssl procps python3 python3-cryptography \
	python3-numpy python3-pandas python3-pip python3-scipy \
	python3-six python3-yaml readline-common sensible-utils \
	ssh systemd systemd-sysv udev vim wget \
	xxd iptables less netcat-openbsd && \
        python3 -m pip install textual

# Make a user, then copy over the /example directory
RUN useradd -m user && echo "user:password" | chpasswd
COPY --chown=user:user ./examples /home/user/examples
RUN chmod -R +x  /home/user/examples/lua
RUN echo 'root:password' | chpasswd
CMD [ "/bin/bash" ]
