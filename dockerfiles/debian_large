FROM --platform=i386 i386/debian:buster
ARG DEBIAN_FRONTEND=noninteractive

RUN apt-get update && apt-get -y upgrade && \
	apt-get install -y apt-utils \
        # bsdgames bsdmainutils \
	cowsay g++ gcc git \
        lua50 luajit \
	nodejs npm python3 \
	python3-pip \
        vim wget \
	xxd less && \
        python3 -m pip install textual && npm i ink react

# Make a user, then copy over the /example directory
RUN useradd -m user && echo "user:password" | chpasswd
COPY --chown=user:user ./examples /home/user/examples
RUN chmod -R +x  /home/user/examples/lua
RUN echo 'root:password' | chpasswd
CMD [ "/bin/bash" ]
